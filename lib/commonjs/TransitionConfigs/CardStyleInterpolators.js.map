{"version":3,"sources":["CardStyleInterpolators.tsx"],"names":["cond","add","multiply","interpolate","Animated","forHorizontalIOS","current","next","layouts","screen","translateFocused","progress","inputRange","outputRange","I18nManager","isRTL","width","translateUnfocused","overlayOpacity","shadowOpacity","cardStyle","transform","translateX","overlayStyle","opacity","shadowStyle","forVerticalIOS","translateY","height","forModalPresentationIOS","index","insets","isLandscape","topOffset","statusBarHeight","top","aspectRatio","scale","borderRadius","overflow","borderTopLeftRadius","borderTopRightRadius","marginTop","forFadeFromBottomAndroid","closing","forRevealFromBottomAndroid","containerTranslateY","cardTranslateYFocused","cardTranslateYUnfocused","containerStyle"],"mappings":"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","sourcesContent":["import { I18nManager } from 'react-native';\nimport Animated from 'react-native-reanimated';\nimport { CardInterpolationProps, CardInterpolatedStyle } from '../types';\n\nconst { cond, add, multiply, interpolate } = Animated;\n\n/**\n * Standard iOS-style slide in from the right.\n */\nexport function forHorizontalIOS({\n  current,\n  next,\n  layouts: { screen },\n}: CardInterpolationProps): CardInterpolatedStyle {\n  const translateFocused = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [I18nManager.isRTL ? -screen.width : screen.width, 0],\n  });\n  const translateUnfocused = next\n    ? interpolate(next.progress, {\n        inputRange: [0, 1],\n        outputRange: [\n          0,\n          multiply(I18nManager.isRTL ? -screen.width : screen.width, -0.3),\n        ],\n      })\n    : 0;\n\n  const overlayOpacity = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [0, 0.07],\n  });\n\n  const shadowOpacity = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [0, 0.3],\n  });\n\n  return {\n    cardStyle: {\n      transform: [\n        // Translation for the animation of the current card\n        { translateX: translateFocused },\n        // Translation for the animation of the card on top of this\n        { translateX: translateUnfocused },\n      ],\n    },\n    overlayStyle: { opacity: overlayOpacity },\n    shadowStyle: { shadowOpacity },\n  };\n}\n\n/**\n * Standard iOS-style slide in from the bottom (used for modals).\n */\nexport function forVerticalIOS({\n  current,\n  layouts: { screen },\n}: CardInterpolationProps): CardInterpolatedStyle {\n  const translateY = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [screen.height, 0],\n  });\n\n  return {\n    cardStyle: {\n      transform: [\n        // Translation for the animation of the current card\n        { translateY },\n      ],\n    },\n  };\n}\n\n/**\n * Standard iOS-style modal animation in iOS 13.\n */\nexport function forModalPresentationIOS({\n  index,\n  current,\n  next,\n  layouts: { screen },\n  insets,\n}: CardInterpolationProps): CardInterpolatedStyle {\n  const isLandscape = screen.width > screen.height;\n  const topOffset = isLandscape ? 0 : 10;\n  const statusBarHeight = insets.top;\n  const aspectRatio = screen.height / screen.width;\n\n  const progress = add(current.progress, next ? next.progress : 0);\n\n  const translateY = interpolate(progress, {\n    inputRange: [0, 1, 2],\n    outputRange: [\n      screen.height,\n      index === 0 ? 0 : topOffset,\n      (index === 0 ? statusBarHeight : 0) - topOffset * aspectRatio,\n    ],\n  });\n\n  const overlayOpacity = interpolate(progress, {\n    inputRange: [0, 1, 1.0001, 2],\n    outputRange: [0, 0.3, 1, 1],\n  });\n\n  const scale = isLandscape\n    ? 1\n    : interpolate(progress, {\n        inputRange: [0, 1, 2],\n        outputRange: [\n          1,\n          1,\n          screen.width ? 1 - (topOffset * 2) / screen.width : 1,\n        ],\n      });\n\n  const borderRadius = isLandscape\n    ? 0\n    : index === 0\n    ? interpolate(progress, {\n        inputRange: [0, 1, 2],\n        outputRange: [0, 0, 10],\n      })\n    : 10;\n\n  return {\n    cardStyle: {\n      overflow: 'hidden',\n      borderTopLeftRadius: borderRadius,\n      borderTopRightRadius: borderRadius,\n      marginTop: index === 0 ? 0 : statusBarHeight,\n      transform: [{ translateY }, { scale }],\n    },\n    overlayStyle: { opacity: overlayOpacity },\n  };\n}\n\n/**\n * Standard Android-style fade in from the bottom for Android Oreo.\n */\nexport function forFadeFromBottomAndroid({\n  current,\n  layouts: { screen },\n  closing,\n}: CardInterpolationProps): CardInterpolatedStyle {\n  const translateY = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [multiply(screen.height, 0.08), 0],\n  });\n\n  const opacity = cond(\n    closing,\n    current.progress,\n    interpolate(current.progress, {\n      inputRange: [0, 0.5, 0.9, 1],\n      outputRange: [0, 0.25, 0.7, 1],\n    })\n  );\n\n  return {\n    cardStyle: {\n      opacity,\n      transform: [{ translateY }],\n    },\n  };\n}\n\n/**\n * Standard Android-style reveal from the bottom for Android Pie.\n */\nexport function forRevealFromBottomAndroid({\n  current,\n  next,\n  layouts: { screen },\n}: CardInterpolationProps): CardInterpolatedStyle {\n  const containerTranslateY = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [screen.height, 0],\n  });\n  const cardTranslateYFocused = interpolate(current.progress, {\n    inputRange: [0, 1],\n    outputRange: [multiply(screen.height, 95.9 / 100, -1), 0],\n  });\n  const cardTranslateYUnfocused = next\n    ? interpolate(next.progress, {\n        inputRange: [0, 1],\n        outputRange: [0, multiply(screen.height, 2 / 100, -1)],\n      })\n    : 0;\n  const overlayOpacity = interpolate(current.progress, {\n    inputRange: [0, 0.36, 1],\n    outputRange: [0, 0.1, 0.1],\n  });\n\n  return {\n    containerStyle: {\n      overflow: 'hidden',\n      transform: [{ translateY: containerTranslateY }],\n    },\n    cardStyle: {\n      transform: [\n        { translateY: cardTranslateYFocused },\n        { translateY: cardTranslateYUnfocused },\n      ],\n    },\n    overlayStyle: { opacity: overlayOpacity },\n  };\n}\n"]}